## 資料庫設計

### **1. 原料表（material）**

存放 **所有的原料資訊**。

| 欄位        | 型別              | 說明       |
| ----------- | ----------------- | ---------- |
| id          | UUID              | 主鍵       |
| name        | VARCHAR           | 原料名稱   |
| enable      | BOOLEAN           | 是否上架   |
| stock       | BOOLEAN           | 是否有庫存 |
| stockAmount | NUMBER（預設 -1） | 庫存數量   |

---

### **2. 類別表（type）**

存放 **產品類別資訊**。

| 欄位   | 型別    | 說明     |
| ------ | ------- | -------- |
| id     | UUID    | 主鍵     |
| name   | VARCHAR | 類別名稱 |
| enable | BOOLEAN | 是否上架 |

---

### **3. 選項表（option）**

存放 **所有的客製化選項**，無論來自 **類別** 還是 **產品自己新增的**。

| 欄位       | 型別                    | 說明                                    |
| ---------- | ----------------------- | --------------------------------------- |
| id         | UUID                    | 主鍵                                    |
| name       | VARCHAR                 | 選項名稱                                |
| price      | NUMBER                  | 價格                                    |
| m-id       | UUID（外鍵）            | 原料 ID                                 |
| type_id    | UUID（外鍵，可為 NULL） | 若此選項是類別的預設選項，則指向類別 ID |
| product_id | UUID（外鍵，可為 NULL） | 若此選項是產品的自訂選項，則指向產品 ID |

-   **來自類別的選項**：`type_id` 有值，`product_id` 為 `NULL`。
-   **來自產品的選項**：`product_id` 有值，`type_id` 為 `NULL`。

---

### **4. 產品表（product）**

存放 **所有的產品資訊**。

| 欄位   | 型別         | 說明     |
| ------ | ------------ | -------- |
| id     | UUID         | 主鍵     |
| name   | VARCHAR      | 名稱     |
| price  | NUMBER       | 價格     |
| enable | BOOLEAN      | 是否上架 |
| typeId | UUID（外鍵） | 類別 ID  |

---

### **5. 產品對原料表（product_material）**

記錄 **產品與原料的關聯**。

| 欄位 | 型別         | 說明    |
| ---- | ------------ | ------- |
| p-id | UUID（外鍵） | 產品 ID |
| m-id | UUID（外鍵） | 原料 ID |

---

### **6. 產品選項排除表（product_excluded_option）**

這張表記錄 **哪些產品不適用某些類別選項**。

| 欄位       | 型別         | 說明                |
| ---------- | ------------ | ------------------- |
| product_id | UUID（外鍵） | 產品 ID             |
| option_id  | UUID（外鍵） | 被排除的類別選項 ID |

---

### **7. 產品選項對應表（product_option）**

記錄 **產品自己新增的選項**。

| 欄位       | 型別         | 說明                  |
| ---------- | ------------ | --------------------- |
| product_id | UUID（外鍵） | 產品 ID               |
| option_id  | UUID（外鍵） | 產品額外新增的選項 ID |

---
